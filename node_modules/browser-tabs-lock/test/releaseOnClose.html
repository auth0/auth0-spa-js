<html>
    <script type="text/javascript" src="../bundle/bundle-2.0.0.js"></script>
    <script>
        let lockingKey = "testing-lock-2";
        let didAcquireLock = false;

        function doTask() {
            let lock = new supertokenslock.getNewInstance();

            lock.acquireLock(lockingKey, 2000)
                .then(success => {
                    didAcquireLock = success;
                    if (!success) {
                        doTask();
                    }
                });
        }
    </script>
    <body>
        <div>
            HI
        </div>
    </body>
</html>