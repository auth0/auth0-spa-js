{"version":3,"file":"rollup-plugin-sourcemaps.es.js","sources":["../src/index.js"],"sourcesContent":["import { createFilter } from 'rollup-pluginutils';\nimport { resolve as resolveSourceMap } from 'source-map-resolve';\nimport * as fs from 'fs';\n\nexport default function sourcemaps({ include, exclude, readFile = fs.readFile } = {}) {\n  const filter = createFilter(include, exclude);\n\n  return {\n    name: 'sourcemaps',\n\n    load(id) {\n      if (!filter(id)) {\n        return null;\n      }\n\n      return new Promise(resolve => {\n        readFile(id, 'utf8', (err, code) => {\n          if (err) {\n            // Failed reading file, let the next plugin deal with it\n            resolve(null);\n          } else {\n            resolveSourceMap(code, id, readFile, (err, sourceMap) => {\n              if (err || sourceMap === null) {\n                // Either something went wrong, or there was no source map\n                resolve(code);\n              } else {\n                const { map, sourcesContent } = sourceMap;\n                map.sourcesContent = sourcesContent;\n                resolve({ code, map });\n              }\n            });\n          }\n        });\n      });\n    },\n  };\n}\n"],"names":["sourcemaps","include","exclude","readFile","fs","filter","createFilter","id","Promise","err","code","sourceMap","map","sourcesContent"],"mappings":";;;;;AAIe,SAASA,UAAT,GAAuE;iFAAJ,EAAI;MAAjDC,OAAiD,QAAjDA,OAAiD;MAAxCC,OAAwC,QAAxCA,OAAwC;2BAA/BC,QAA+B;MAA/BA,WAA+B,iCAApBC,QAAoB;;MAC9EC,SAASC,aAAaL,OAAb,EAAsBC,OAAtB,CAAf;;SAEO;UACC,YADD;;SAGAK,EAAL,EAAS;UACH,CAACF,OAAOE,EAAP,CAAL,EAAiB;eACR,IAAP;;;aAGK,IAAIC,OAAJ,CAAY,sBAAW;oBACnBD,EAAT,EAAa,MAAb,EAAqB,UAACE,GAAD,EAAMC,IAAN,EAAe;cAC9BD,GAAJ,EAAS;;uBAEC,IAAR;WAFF,MAGO;oBACYC,IAAjB,EAAuBH,EAAvB,EAA2BJ,WAA3B,EAAqC,UAACM,GAAD,EAAME,SAAN,EAAoB;kBACnDF,OAAOE,cAAc,IAAzB,EAA+B;;2BAErBD,IAAR;eAFF,MAGO;oBACGE,GADH,GAC2BD,SAD3B,CACGC,GADH;oBACQC,cADR,GAC2BF,SAD3B,CACQE,cADR;;oBAEDA,cAAJ,GAAqBA,cAArB;2BACQ,EAAEH,IAAF,EAAQE,GAAR,EAAR;;aAPJ;;SALJ;OADK,CAAP;;GARJ;;;"}